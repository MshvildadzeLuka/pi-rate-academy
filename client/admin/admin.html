<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | Pi-Rate Academy</title>
    <link rel="stylesheet" href="../assets/css/global.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="../header/header.css">
    <link rel="stylesheet" href="admin.css">
    <script src="../assets/js/auth.js" defer></script>
</head>
<body>

    <div id="header-placeholder"></div>

    <div class="admin-wrapper">
        <aside class="admin-sidebar">
            <nav>
                <ul>
                    <li><a href="#" class="sidebar-link active" data-target="dashboard-panel"><i class="fa-solid fa-chart-pie fa-fw"></i><span>Dashboard</span></a></li>
                    <li><a href="#" class="sidebar-link" data-target="users-panel"><i class="fa-solid fa-users fa-fw"></i><span>Users</span></a></li>
                    <li><a href="#" class="sidebar-link" data-target="groups-panel"><i class="fa-solid fa-user-group fa-fw"></i><span>Groups</span></a></li>
                    <li><a href="#" class="sidebar-link" data-target="notes-panel"><i class="fa-solid fa-file-alt fa-fw"></i><span>Notes</span></a></li>
                    <li><a href="#" class="sidebar-link" data-target="videos-panel"><i class="fa-solid fa-video fa-fw"></i><span>Videos</span></a></li>
                    <li><a href="#" class="sidebar-link" data-target="calendar-panel"><i class="fa-solid fa-calendar-days fa-fw"></i><span>Calendar</span></a></li>
                </ul>
            </nav>
            <div id="calendar-control-panel" class="sidebar-panel hidden">
                <h3 id="calendar-panel-title">Schedule Lecture</h3>
                <p id="sidebar-time-range">Select a time on the calendar</p>
                <div class="form-group">
                    <label for="lecture-title-input">Lecture Title</label>
                    <input type="text" id="lecture-title-input" placeholder="e.g., Intro to Algorithms">
                </div>
                <div class="form-actions">
                    <button id="delete-lecture-btn" class="btn btn--danger" disabled><i class="fa-solid fa-trash"></i> Delete</button>
                    <button id="save-lecture-btn" class="btn btn--primary" disabled><i class="fa-solid fa-save"></i> Save</button>
                </div>
            </div>
        </aside>

        <main class="admin-content">
            <div id="dashboard-panel" class="admin-panel active">
                <div class="panel-header"><h1>Dashboard</h1></div>
                <div class="stats-grid" id="stats-grid">
                    <div class="stat-card"><i class="fa-solid fa-users"></i><div><h3>Total Users</h3><p id="total-users-stat">--</p></div></div>
                    <div class="stat-card"><i class="fa-solid fa-user-group"></i><div><h3>Total Groups</h3><p id="total-groups-stat">--</p></div></div>
                    <div class="stat-card"><i class="fa-solid fa-file-alt"></i><div><h3>Total Notes</h3><p id="total-notes-stat">--</p></div></div>
                    <div class="stat-card"><i class="fa-solid fa-video"></i><div><h3>Total Videos</h3><p id="total-videos-stat">--</p></div></div>
                </div>
                <div class="panels-grid">
                    <div class="panel"><h2 class="panel-title">Quick Actions</h2><div class="quick-actions-list"><button class="btn btn--primary" id="quick-create-user-btn"><i class="fa-solid fa-user-plus"></i> Create New User</button><button class="btn btn--primary" id="quick-create-group-btn"><i class="fa-solid fa-plus-circle"></i> Create New Group</button><button class="btn btn--primary" id="quick-upload-note-btn"><i class="fa-solid fa-upload"></i> Upload Note</button></div></div>
                    <div class="panel"><h2 class="panel-title">Recent Activity</h2><ul id="recent-activity-list" class="activity-feed"></ul></div>
                </div>
            </div>

            <div id="users-panel" class="admin-panel"><div class="panel-header"><h1>User Management</h1><button id="create-user-btn" class="btn btn--primary"><i class="fa-solid fa-plus"></i> Create User</button></div><div class="table-container" id="users-table-container"></div></div>
            <div id="groups-panel" class="admin-panel"><div class="panel-header"><h1>Group Management</h1><button id="create-group-btn" class="btn btn--primary"><i class="fa-solid fa-plus"></i> Create Group</button></div><div class="table-container" id="groups-table-container"></div></div>
            <div id="notes-panel" class="admin-panel"><div class="panel-header"><h1>Notes Management</h1><button id="upload-note-btn" class="btn btn--primary"><i class="fa-solid fa-upload"></i> Upload Note</button></div><div class="table-container" id="notes-table-container"></div></div>
            <div id="videos-panel" class="admin-panel"><div class="panel-header"><h1>Video Management</h1><button id="upload-video-btn" class="btn btn--primary"><i class="fa-solid fa-plus"></i> Add Video</button></div><div class="table-container" id="videos-table-container"></div></div>

            <div id="calendar-panel" class="admin-panel">
                <div class="panel-header"><h1>Schedule Group Lectures</h1></div>
                <div class="calendar-main-header">
                    <div class="calendar-top-controls">
                        <div class="form-group"><label for="group-select">Select Group</label><select id="group-select"></select></div>
                        <button id="suggest-schedule-btn" class="btn" disabled><i class="fa-solid fa-wand-magic-sparkles"></i> Suggest</button>
                    </div>
                    <div class="week-nav">
                        <button id="today-btn" class="btn">Today</button>
                        <button id="prev-week-btn" aria-label="Previous Week"><i class="fa-solid fa-chevron-left"></i></button>
                        <h2 id="current-week-display"></h2>
                        <button id="next-week-btn" aria-label="Next Week"><i class="fa-solid fa-chevron-right"></i></button>
                    </div>
                </div>
                <div class="calendar-grid-wrapper" role="grid" aria-label="Weekly schedule grid">
                    <div class="calendar-grid">
                        <div id="current-time-indicator" class="current-time-indicator" aria-hidden="true"></div>
                        <div class="grid-header time-column-header" aria-hidden="true"></div>
                        <div class="grid-header day-column-header" data-day-header="0">
                            <div class="day-header-content">
                                <span class="day-name">Mon</span>
                                <span class="day-number"></span>
                            </div>
                        </div>
                        <div class="grid-header day-column-header" data-day-header="1">
                            <div class="day-header-content">
                                <span class="day-name">Tue</span>
                                <span class="day-number"></span>
                            </div>
                        </div>
                        <div class="grid-header day-column-header" data-day-header="2">
                            <div class="day-header-content">
                                <span class="day-name">Wed</span>
                                <span class="day-number"></span>
                            </div>
                        </div>
                        <div class="grid-header day-column-header" data-day-header="3">
                            <div class="day-header-content">
                                <span class="day-name">Thu</span>
                                <span class="day-number"></span>
                            </div>
                        </div>
                        <div class="grid-header day-column-header" data-day-header="4">
                            <div class="day-header-content">
                                <span class="day-name">Fri</span>
                                <span class="day-number"></span>
                            </div>
                        </div>
                        <div class="grid-header day-column-header" data-day-header="5">
                            <div class="day-header-content">
                                <span class="day-name">Sat</span>
                                <span class="day-number"></span>
                            </div>
                        </div>
                        <div class="grid-header day-column-header" data-day-header="6">
                            <div class="day-header-content">
                                <span class="day-name">Sun</span>
                                <span class="day-number"></span>
                            </div>
                        </div>
                        <div class="time-column" id="time-column" aria-hidden="true"></div>
                        <div class="day-column" data-day="0" role="gridcell"></div>
                        <div class="day-column" data-day="1" role="gridcell"></div>
                        <div class="day-column" data-day="2" role="gridcell"></div>
                        <div class="day-column" data-day="3" role="gridcell"></div>
                        <div class="day-column" data-day="4" role="gridcell"></div>
                        <div class="day-column" data-day="5" role="gridcell"></div>
                        <div class="day-column" data-day="6" role="gridcell"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="user-form-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title-user">Create New User</h2>
                <button class="close-modal" aria-label="Close">×</button>
            </div>
            <form id="user-form" novalidate>
                <div class="input-group">
                    <label for="user-role">Role</label>
                    <select id="user-role" name="role" required>
                        <option value="Student">Student</option>
                        <option value="Teacher">Teacher</option>
                        <option value="Admin">Admin</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="input-group">
                        <label for="first-name">First Name</label>
                        <input type="text" id="first-name" name="firstName" required>
                    </div>
                    <div class="input-group">
                        <label for="last-name">Last Name</label>
                        <input type="text" id="last-name" name="lastName" required>
                    </div>
                </div>
                <div class="input-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div id="teacher-fields" class="hidden">
                    <div class="input-group">
                        <label for="about-me">About Me</label>
                        <textarea id="about-me" name="aboutMe" rows="3"></textarea>
                    </div>
                    <div class="input-group">
                        <label for="photo-url">Photo URL</label>
                        <input type="text" id="photo-url" name="photoUrl">
                    </div>
                </div>
                <div class="input-group">
                    <label for="password" id="password-label">Temporary Password</label>
                    <input type="text" id="password" name="password">
                </div>
                <button type="submit" class="btn btn--primary btn--full-width">Save User</button>
            </form>
        </div>
    </div>
    
    <div id="note-form-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title-note">Upload New Note</h2>
                <button class="close-modal" aria-label="Close">×</button>
            </div>
            <form id="note-form" novalidate>
                <div class="input-group">
                    <label for="note-title">Note Title</label>
                    <input type="text" id="note-title" name="title" required>
                </div>
                <div class="input-group">
                    <label for="note-description">Description</label>
                    <textarea id="note-description" name="description" rows="4"></textarea>
                </div>
                <div class="input-group">
                    <label for="note-file-input">File</label>
                    <div class="custom-file-input">
                        <input type="file" id="note-file-input" name="file">
                        <label for="note-file-input" class="btn">Choose File</label>
                        <span class="file-name" id="note-file-name">No file selected</span>
                    </div>
                </div>
                <button type="submit" class="btn btn--primary btn--full-width">Save Note</button>
            </form>
        </div>
    </div>

    <div id="video-form-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title-video">Add New Video</h2>
                <button class="close-modal" aria-label="Close">×</button>
            </div>
            <form id="video-form" novalidate>
                <div class="input-group">
                    <label>Video Source</label>
                    <div class="radio-group">
                        <label class="custom-radio"><input type="radio" name="video-source" value="upload" checked><span>Upload</span></label>
                        <label class="custom-radio"><input type="radio" name="video-source" value="link"><span>Link</span></label>
                    </div>
                </div>
                <div class="input-group">
                    <label for="video-title">Video Title</label>
                    <input type="text" id="video-title" name="title" required>
                </div>
                <div class="input-group">
                    <label for="video-description">Description</label>
                    <textarea id="video-description" name="description" rows="4"></textarea>
                </div>
                <div id="video-file-group" class="input-group">
                    <label for="video-file-input">Video File</label>
                    <div class="custom-file-input">
                        <input type="file" id="video-file-input" name="video">
                        <label for="video-file-input" class="btn">Choose File</label>
                        <span class="file-name" id="video-file-name">No file selected</span>
                    </div>
                </div>
                <div id="video-link-group" class="input-group hidden">
                    <label for="video-youtube-url">Video URL</label>
                    <input type="text" id="video-youtube-url" name="url" placeholder="https://www.youtube.com/watch?v=...">
                </div>
                <button type="submit" class="btn btn--primary btn--full-width">Save Video</button>
            </form>
        </div>
    </div>

    <div id="group-form-modal" class="modal-overlay hidden">
         <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title-group">Create New Group</h2>
                <button class="close-modal" aria-label="Close">×</button>
            </div>
            <form id="group-form">
                <div class="modal-body">
                    <div class="input-group">
                        <label for="group-name">Group Name</label>
                        <input type="text" id="group-name" name="name" required>
                    </div>
                    <div class="input-group">
                        <label for="group-zoom-link">Zoom Link</label>
                        <input type="text" id="group-zoom-link" name="zoomLink">
                    </div>
                    <div class="input-group">
                        <label>Assign Teacher</label>
                        <select id="teacher-select"></select>
                    </div>
                    <div class="input-group">
                        <label>Enroll Students</label>
                        <div id="student-multiselect"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn--primary btn--full-width">Save Group</button>
                </div>
            </form>
         </div>
    </div>

    <script src="../header/header.js"></script>
    <script src="admin.js"></script>
</body>
</html>